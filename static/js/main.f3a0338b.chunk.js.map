{"version":3,"sources":["services/LocalStorageService.ts","services/api.ts","services/AuthService.ts","contexts/AuthContext.tsx","assets/images/trinca.svg","layouts/Footer.tsx","layouts/Header.tsx","assets/images/icon_money.svg","assets/images/icon_people.svg","components/Row.tsx","pages/Detail.tsx","services/BarbecueService.ts","components/Card.tsx","assets/images/icon_bbq.svg","components/NewCard.tsx","pages/List.tsx","hooks/useAuth.ts","pages/Login.tsx","pages/PrivateRoute.tsx","App.tsx","index.tsx"],"names":["saveAuth","auth","params","key","localStorage","setItem","JSON","stringify","getAuth","parse","getItem","api","axios","create","baseURL","interceptors","request","use","config","headers","Authorization","access_token","getApi","login","post","then","data","AuthContext","createContext","AuthContextProvider","props","useState","LocalStorageService","authentication","setAuthentication","history","useHistory","useEffect","logIn","a","AuthService","push","Provider","value","children","Footer","src","Trinca","alt","Header","Row","className","name","paid","Detail","detail","setDetail","id","useParams","get","fetchDetail","create_at","description","people","users","length","money","price","map","i","Card","style","textDecoration","color","to","NewCard","bbq","List","list","setList","useAuth","useContext","Login","email","password","state","setState","onSubmitHandler","event","preventDefault","onChangeHandler","target","onSubmit","htmlFor","onChange","type","placeholder","PrivateRoute","context","rest","render","location","pathname","from","App","path","component","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f3a0338b.chunk.js","sourcesContent":["import { Authentication } from \"../interfaces/Authentication\";\n\nconst setItem = (params: { [key: string]: any }, key: string) => localStorage.setItem(key, JSON.stringify(params));\nexport const saveAuth = (auth: Authentication) => setItem(auth, 'AUTHORIZATION_KEY');\n\nconst getItem = (key: string) => localStorage.getItem(key);\nexport const getAuth = () => JSON.parse(getItem('AUTHORIZATION_KEY') || '{}') as Authentication;","import axios from \"axios\";\nimport { getAuth } from \"./LocalStorageService\";\n\n// TODO insert dynamically access token to requests\n\nexport const api = getApi();\n\nfunction getApi() {\n    const api = axios.create({\n        baseURL: 'http://localhost:3333',\n    });\n\n    api.interceptors.request.use(config => {\n        const auth = getAuth();\n        config.headers.Authorization = `Bearer ${auth?.access_token}`;\n        return config;\n    })\n\n    return api;\n}","import { Authentication } from './../interfaces/Authentication';\nimport { api } from \"./api\";\n\nexport const login = (params: { email: string, password: string }) => api.post<Authentication>('/login', params).then(({ data }) => data);\nexport const refreshToken = () => { };","import { createContext, ReactNode, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Authentication } from '../interfaces/Authentication';\nimport * as AuthService from '../services/AuthService';\nimport * as LocalStorageService from '../services/LocalStorageService';\n\ninterface IAuthContext {\n    authentication: Authentication | undefined,\n    logIn: (params: { email: string, password: string }) => Promise<void>,\n}\n\nexport const AuthContext = createContext({} as IAuthContext);\n\ninterface AuthContextProviderProps {\n    children: ReactNode;\n}\n\nexport const AuthContextProvider = (props: AuthContextProviderProps) => {\n    const [authentication, setAuthentication] = useState<Authentication>(LocalStorageService.getAuth());\n    const history = useHistory();\n\n    useEffect(() => {\n        authentication && LocalStorageService.saveAuth(authentication);\n    }, [authentication])\n\n    const logIn = async (params: { email: string, password: string }) => AuthService.login(params)\n        .then(setAuthentication)\n        .then(() => history.push('/list'));\n\n    return (\n        <AuthContext.Provider value={{ authentication, logIn }}>\n            {props.children}\n        </AuthContext.Provider>\n    );\n}","export default __webpack_public_path__ + \"static/media/trinca.eca43859.svg\";","import Trinca from '../assets/images/trinca.svg';\n\nexport const Footer = () => {\n    return (\n        <footer>\n            <img src={Trinca} alt=\"trinca loco\" />\n        </footer>\n    );\n}","export const Header = () => {\n    return (\n        <header>Barbecue calendar</header>\n    );\n}","export default __webpack_public_path__ + \"static/media/icon_money.d670e783.svg\";","export default __webpack_public_path__ + \"static/media/icon_people.2feb883b.svg\";","interface IProps {\n    name: string,\n    paid: number,\n}\n\nexport const Row = (props: IProps) => {\n    return (\n        <div className=\"detail__row\">\n            <span className=\"detail__row--checkbox\"></span>\n            <span className=\"detail__row--user\">{props.name}</span>\n            <span className=\"detail__row--price\">{props.paid}</span>\n        </div>\n    );\n}","import { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport money from '../assets/images/icon_money.svg';\nimport people from '../assets/images/icon_people.svg';\nimport { Row } from '../components/Row';\nimport { Barbecue } from '../interfaces/Barbecue';\nimport { fetchDetail } from '../services/BarbecueService';\nimport '../styles/pages/detail.scss';\n\nexport const Detail = () => {\n    const [detail, setDetail] = useState<Barbecue>();\n    let { id } = useParams<{ id: string }>();\n\n    useEffect(() => {\n        fetchDetail(id).then(setDetail);\n    }, [id]);\n\n    return (\n        <main className=\"detail\">\n            <div className=\"detail__background\">\n                <div className=\"detail-titles\">\n                    <div className=\"detail__title\">\n                        <h1 className=\"detail__title--date\">{detail?.create_at}</h1>\n                        <span className=\"detail__title--description\">{detail?.description}</span>\n                    </div>\n                    <div className=\"detail__amount\">\n                        <span className=\"detail__amount--number\">\n                            <img src={people} alt=\"\" className=\"detail__amount--icon\" /> {detail?.users.length ?? 0}\n                        </span>\n                        <span className=\"detail__amount--number\">\n                            <img src={money} alt=\"\" className=\"detail__amount--icon\" /> $ {detail?.price}\n                        </span>\n                    </div>\n                </div>\n                {detail?.users?.map(i => <Row key={i.id} {...i} />)}\n            </div>\n        </main>\n    );\n}","import { Barbecue } from \"../interfaces/Barbecue\";\nimport { api } from \"./api\";\n\nexport const fetchList = () => api.get<Barbecue[]>('/barbecues').then(({ data }) => data);\nexport const fetchDetail = (id: string) => api.get<Barbecue>(`/barbecues/${id}`).then(({ data }) => data);","import { Link } from 'react-router-dom';\nimport money from '../assets/images/icon_money.svg';\nimport people from '../assets/images/icon_people.svg';\nimport { Barbecue } from '../interfaces/Barbecue';\nimport '../styles/components/card.scss';\n\ninterface IProps extends Barbecue {\n}\n\nexport const Card = (props: IProps) => {\n    return (\n        <Link style={{ textDecoration: 'none', color: 'inherit' }} to={`/list/${props.id}`}>\n            <section className=\"card\">\n                <div className=\"card__text\">\n                    <h2 className=\"card__title\">{props.create_at}</h2>\n                    <p className=\"card__description\">{props.description}</p>\n                </div>\n\n                <div className=\"card__number\">\n                    <div className=\"card__amount\">\n                        <span className=\"card__amount--result\">\n                            <img src={people} alt=\"\" className=\"card__amount--icon\" /> {props.users?.length ?? 0}\n                        </span>\n                    </div>\n\n                    <div className=\"card__amount\">\n                        <span className=\"card__amount--result\">\n                            <img src={money} alt=\"\" className=\"card__amount--icon\" /> $ {props.price}\n                        </span>\n                    </div>\n                </div>\n            </section>\n        </Link>\n    );\n}","export default __webpack_public_path__ + \"static/media/icon_bbq.ac532158.svg\";","import '../styles/components/card.scss'\nimport bbq from '../assets/images/icon_bbq.svg'\n\nexport const NewCard = () => {\n    return (\n        <section className=\"card card__new\">\n            <div className=\"card__new--icon\">\n                <img src={bbq} alt=\"\" />\n            </div>\n            <span className=\"card__new--text\">Add barbecue</span>\n        </section>\n    );\n}","import { useEffect, useState } from 'react';\nimport { Card } from '../components/Card';\nimport { NewCard } from '../components/NewCard';\nimport { Barbecue } from '../interfaces/Barbecue';\nimport { fetchList } from '../services/BarbecueService';\nimport '../styles/pages/list.scss';\n\nexport const List = () => {\n    const [list, setList] = useState<Barbecue[]>([])\n\n    useEffect(() => {\n        fetchList().then(setList);\n    }, []);\n\n    return (\n        <main className=\"list\">\n            {list?.map(i => (<div key={i.id} className=\"list-card\"><Card {...i} /></div>))}\n            <div className=\"list-card\">\n                <NewCard />\n            </div>\n        </main>\n    );\n}","import { useContext } from \"react\";\nimport { AuthContext } from \"../contexts/AuthContext\";\n\nexport const useAuth = () => useContext(AuthContext);","import { ChangeEvent, FormEvent, useState } from \"react\";\nimport { useAuth } from \"../hooks/useAuth\";\nimport \"../styles/pages/login.scss\";\n\nexport const Login = () => {\n    const [state, setState] = useState({ email: '', password: '' })\n    const { logIn } = useAuth();\n\n    const onSubmitHandler = async (event: FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        await logIn({ ...state });\n    }\n\n    const onChangeHandler = (event: ChangeEvent<HTMLInputElement>) => {\n        event.preventDefault();\n        setState({ ...state, [event.target.name]: event.target.value })\n    }\n\n    return (\n        <section className=\"login\">\n            <form className=\"login-form\" onSubmit={onSubmitHandler}>\n                <div className=\"login__group\">\n                    <label className=\"login__group--label\" htmlFor=\"login\">Login</label>\n                    <input onChange={onChangeHandler} className=\"login__group--input\" name=\"email\" id=\"login\" type=\"text\" placeholder=\"e-mail\" />\n                </div>\n\n                <div className=\"login__group\">\n                    <label className=\"login__group--label\" htmlFor=\"password\">Password</label>\n                    <input onChange={onChangeHandler} className=\"login__group--input\" name=\"password\" id=\"password\" type=\"password\" placeholder=\"password\" />\n                </div>\n\n                <div className=\"login-button\">\n                    <button type=\"submit\" className=\"btn btn--black btn-login\">Login</button>\n                </div>\n            </form>\n        </section>\n    );\n}","import { ReactNode } from \"react\";\nimport { Redirect, Route } from \"react-router-dom\";\nimport { useAuth } from \"../hooks/useAuth\";\n\ninterface IProps {\n    children: ReactNode,\n    [x: string]: any,\n}\n\nexport const PrivateRoute = (props: IProps) => {\n    const context = useAuth();\n    const { children, ...rest } = props;\n\n    return (\n        <Route\n            {...rest}\n            render={({ location }) => context.authentication?.access_token ?\n                (children)\n                :\n                (<Redirect to={{ pathname: \"/login\", state: { from: location } }} />)\n            }\n        />\n    );\n}","import { BrowserRouter as Router, Redirect, Route, Switch } from \"react-router-dom\";\nimport { AuthContextProvider } from \"./contexts/AuthContext\";\nimport { Footer } from \"./layouts/Footer\";\nimport { Header } from './layouts/Header';\nimport { Detail } from './pages/Detail';\nimport { List } from './pages/List';\nimport { Login } from './pages/Login';\nimport { PrivateRoute } from \"./pages/PrivateRoute\";\nimport './styles/pages/app.scss';\n\nfunction App() {\n  return (\n    <div className=\"app\">\n      <Header />\n      <div className=\"app__background\">\n        <Router>\n          <AuthContextProvider>\n            <Switch>\n              <PrivateRoute path=\"/list/:id\"><Detail /></PrivateRoute>\n              <PrivateRoute path=\"/list\"><List /></PrivateRoute>\n              <Route path=\"/login\" component={Login} />\n              <Redirect from=\"*\" to=\"/login\" />\n            </Switch>\n          </AuthContextProvider>\n          <Footer />\n        </Router>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './styles/main.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}